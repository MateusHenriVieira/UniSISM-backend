## üõ†Ô∏è O que criamos at√© agora?

1. **Infraestrutura de Containers (Docker):** Criamos um ambiente isolado na sua VPS onde o Python e o PostgreSQL conversam entre si, com todas as depend√™ncias de OCR (Tesseract) instaladas.
2. **C√©rebro de Automa√ß√£o (OCR Engine):** Implementamos a l√≥gica que "l√™" documentos do SUS, extrai dados cr√≠ticos (CPF, Data, Telefone) e os transforma em dados estruturados.
3. **Base de Dados Governamental:** Modelamos as tabelas que servir√£o como a "√∫nica fonte da verdade" para o m√©dico, a secretaria e o transporte.
4. **API Centralizada:** Configuramos o ponto de entrada que gerencia as permiss√µes de acesso (CORS) e organiza os m√≥dulos do sistema.

---

## üìÇ Arquivos que mexemos e suas fun√ß√µes

| Arquivo | O que ele faz no UniSISM? |
| --- | --- |
| **`docker-compose.yml`** | Define que o sistema tem dois "servidores": um para o banco de dados e outro para a nossa aplica√ß√£o Python. |
| **`Dockerfile`** | Cont√©m a receita de bolo para instalar o motor de OCR (Tesseract) dentro do servidor Linux do container. |
| **`requirements.txt`** | Lista todas as bibliotecas Python (FastAPI, SQLAlchemy, Tesseract) que o sistema precisa para respirar. |
| **`app/main.py`** | √â o "porteiro" do sistema. Ele liga as tabelas do banco ao iniciar e direciona as requisi√ß√µes para os m√≥dulos corretos. |
| **`app/db/session.py`** | Gerencia a "ponte" de conex√£o. Ele abre e fecha conversas com o PostgreSQL para garantir que n√£o haja vazamento de dados. |
| **`app/db/base.py`** | Aqui definimos a estrutura das tabelas: **Pacientes**, **Agendamentos** e **ViagensTFD**, com campos para status de rastreio e travas de seguran√ßa. |
| **`app/services/ocr_service.py`** | Cont√©m a intelig√™ncia que pega a imagem do PDF, usa vis√£o computacional e devolve o CPF e telefone prontos para uso. |
| **`app/api/endpoints/ocr.py`** | √â a rota que recebe o arquivo da secret√°ria e decide se cria um novo paciente ou apenas agenda um exame. |

---

## üîÑ Fluxo de Dados Atual

Atualmente, o UniSISM j√° √© capaz de fazer o seguinte fluxo:

1. **Entrada:** A secret√°ria envia um PDF de agendamento do SUS.
2. **Processamento:** O `OCRService` l√™ o documento e identifica o CPF.
3. **Decis√£o:** O sistema checa se esse CPF j√° existe na tabela de `Pacientes`.
4. **Sa√≠da:** Ele cria o `Agendamento` vinculado ao paciente e avisa se o processo deu certo.